#!/usr/bin/python

# Rename this file to `service`, so info-beamer automatically starts it
# on your device.

import time
from ibquery import InfoBeamerQuery
from datetime import datetime
import random
import string

time = datetime.now().strftime("%H:%M:%S")

def randStr(chars=string.ascii_uppercase + string.digits, N=10):
    return ''.join(random.choice(chars) for _ in range(N))

def main():
    while 1:
        ib = InfoBeamerQuery("127.0.0.1")

        # Example for atommic mode: Set 3 lines, the last one being
        # the current unix timestamp.
        con = ib.node("display/atomic").io(raw=True)
        # con.write("Hello\nWorld\n%d\n" % time.time())
        # con.write("Hello\nWorld\n%s\n" % (randStr(N=6)))
       # con.write("%s\n\n%s\n" % (randStr(N=16), randStr(N=16)))
        # con.write("time:\n" % datetime.now().strftime("%H:%M:%S"))
         con.write("Hello\nWorld\n%s\n" % datetime.now().strftime("%H:%M:%S"))

        con.close()
        time.sleep(6)

if __name__ == "__main__":
    main()
